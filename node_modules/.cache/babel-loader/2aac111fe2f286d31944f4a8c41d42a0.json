{"ast":null,"code":"'use strict'; //This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._0);\n  p._V = 1;\n  p._W = value;\n  return p;\n}\n\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n\n  return valuePromise(value);\n};\n\nvar iterableToArray = function (iterable) {\n  if (typeof Array.from === 'function') {\n    // ES2015+, iterables exist\n    iterableToArray = Array.from;\n    return Array.from(iterable);\n  } // ES5, only arrays and array-likes exist\n\n\n  iterableToArray = function (x) {\n    return Array.prototype.slice.call(x);\n  };\n\n  return Array.prototype.slice.call(iterable);\n};\n\nPromise.all = function (arr) {\n  var args = iterableToArray(arr);\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._V === 3) {\n            val = val._W;\n          }\n\n          if (val._V === 1) return res(i, val._W);\n          if (val._V === 2) reject(val._W);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n\n      args[i] = val;\n\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    iterableToArray(values).forEach(function (value) {\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n/* Prototype Methods */\n\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};","map":{"version":3,"sources":["/home/mohamed/Desktop/projects/oxycare/node_modules/promise/lib/es6-extensions.js"],"names":["Promise","require","module","exports","TRUE","valuePromise","FALSE","NULL","UNDEFINED","undefined","ZERO","EMPTYSTRING","value","p","_0","_V","_W","resolve","then","bind","ex","reject","iterableToArray","iterable","Array","from","x","prototype","slice","call","all","arr","args","length","remaining","res","i","val","race","values","forEach","onRejected"],"mappings":"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","sourcesContent":["'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._0);\n  p._V = 1;\n  p._W = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nvar iterableToArray = function (iterable) {\n  if (typeof Array.from === 'function') {\n    // ES2015+, iterables exist\n    iterableToArray = Array.from;\n    return Array.from(iterable);\n  }\n\n  // ES5, only arrays and array-likes exist\n  iterableToArray = function (x) { return Array.prototype.slice.call(x); };\n  return Array.prototype.slice.call(iterable);\n}\n\nPromise.all = function (arr) {\n  var args = iterableToArray(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._V === 3) {\n            val = val._W;\n          }\n          if (val._V === 1) return res(i, val._W);\n          if (val._V === 2) reject(val._W);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    iterableToArray(values).forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n"]},"metadata":{},"sourceType":"script"}